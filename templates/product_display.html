{% extends 'base.html' %}
{% load static %}

{% block contain %}
    <link rel="stylesheet" href="{% static 'css/product-display.css' %}">

    <style>
        .product-image-scroll {
            display: flex;
            overflow-x: auto;
            gap: 16px; /* space between images */
            padding: 10px;
            scroll-snap-type: x mandatory;
        }
    
        .product-image-scroll img {
            height: 70vh;
            scroll-snap-align: start;
            flex-shrink: 0;
        }
    
        /* Default: large screen layout */
        #mainResultImage,
        #mainGarmentImage {
            width: 50%;
            height: 70%;
        }
    
        /* Mobile: result and garment both take 80% width */
        @media (max-width: 768px) {
            #mainResultImage,
            #mainGarmentImage {
                width: 80%;
                height: 60%;
            }
        }

        .labels {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .tag {
            display: inline-block;
            background-color: #f1f1f1;
            color: #333;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: background-color 0.3s ease, transform 0.3s ease;
        }
        
        .tag:hover {
            background-color: #e0e0e0;
            transform: scale(1.05);
        }
        
        .tag.large {
            font-size: 15px;
            padding: 8px 14px;
            background-color: #e8f0ff;
            color: #1a73e8;
            font-weight: 600;
        }
        
        .tag.yellow {
            background-color: #fff8dc;
            color: #b8860b;
            font-weight: 600;
        }

        .tag.red {
            background-color: #ffefc2;
            color: #d35400;
            font-weight: 600;
        }
        
        .tag.bestseller {
            background-color: #ffefc2;
            color: #d35400;
            font-weight: bold;
            border: 1px solid #e67e22;
            box-shadow: 0 2px 6px rgba(255, 165, 0, 0.3);
        }
        
    </style>

    <!-- prduct details -->
    <main id="main" class="main">
        <!-- Shop Title -->
        <header style="text-align: center; padding: 20px 0;">
            <h1 style="font-size: 2.5rem; font-weight: bold; color: #333;">FitAttire</h1>
        </header>

        <section class="product-details">
            {% if show_edit %}
                <div style="text-align: right;">
                    {% comment %} <a href="{% url 'edit_product' product_id %}" class="btn btn-warning"> {% endcomment %}
                    ‚úèÔ∏è Edit Product
                    </a>
                </div>
            {% endif %}

            <!-- Top Labels -->
            <div class="labels">
                {% if piece === "available" %}
                    <span class="tag">{{ product.product_name }}</span>
                    <span class="tag">{{ product.product_category }}</span>
                    <span class="tag large">{{ product.product_subCategory }}</span>
                    
                    <span class="tag yellow">Piece Available</span>
                {% else %}
                    <span class="tag">{{ product.product_name }}</span>
                    <span class="tag red">Piece Sold</span>
                {% endif %}

                {% if product.sold_count > 40 %}
                    <span class="tag bestseller">üî• Best Seller</span>
                {% endif %}
            </div>

            <!-- Product ID and Sold Count -->
            <div style="margin: 10px 0 20px 0; font-size: 15px; color: #555;">
                <strong>Product ID:</strong> {{ product_id }} &nbsp;|&nbsp;
                <strong>Sold to:</strong> {{ sold_count }}+ people
            </div>

            <div class="product-image-wrapper">
                <button class="scroll-btn left" onclick="scrollImages('left')">
                    &#8592;
                </button>

                <div class="product-image-scroll mx-2" id="imageContainer">
                    <img id="mainResultImage" src="{{ product.variants.0.result_image }}" class="main-image" alt="Result Image" />
                    <img id="mainGarmentImage" src="{{ product.variants.0.garment_image }}" class="main-image" alt="Garment Image" />
                    <!-- Images will be dynamically inserted here -->
                </div>

                <button class="scroll-btn right" onclick="scrollImages('right')">
                    &#8594;
                </button>
            </div>

            <!-- product info -->
            <div class="info-grid">
                <div class="info-item">
                    <p><strong>Fabric:</strong> <span class="highlight">{{product.product_fabric}}</span></p>
                </div>

                <div class="info-item">
                    <p><strong>Color:</strong> <span id="selectedColor">{{ product.variants.0.color }}</span></p>
                    {% comment %} <div class="color-options">
                        {% for variant in product.variants %}
                            <div class="swatch {{ variant.color|lower }}"
                                onclick="selectVariant('{{ variant.color }}')"
                                data-color="{{ variant.color }}"
                                data-garment="{{ variant.garment_image }}"
                                data-results='{{ variant.result_images|safe|escapejs }}'
                                title="{{ variant.color }}">
                            </div>
                        {% endfor %}
                    </div> {% endcomment %}
                    <!-- 2. THUMBNAILS (Default from first variant) -->
                    <div class="thumbnail-row">
                        {% for variant in product.variants %}
                            <img 
                                src="{{ variant.result_image }}" 
                                class="result-thumb {% if forloop.first %}active{% endif %}" 
                                onclick="updateDisplay('{{ variant.result_image }}', '{{ variant.garment_image }}', '{{ variant.color }}', this, {{ forloop.counter0 }})"
                            />
                        {% endfor %}
                    </div>

                </div>

                <div class="info-item">
                    <p><strong>Sizes:</strong></p>
                    <div class="sizes">
                        {% for size in product.sizes %}
                            <button>{{ size }}</button>
                        {% endfor %}
                    </div>
                </div>

                {% comment %} <div class="info-item">
                    <p>
                        <strong>Price:</strong> <span class="highlight price">‚Çπ{{product.selling_price}}</span>
                        <br>
                        <span class="discount">-{{discount}}%</span>
                        <span class="mrp">M.R.P.: ‚Çπ{{product_price}}</span>
                    </p>
                </div> {% endcomment %}
            </div>

        </section>


        <!-- realated products -->
        {% comment %} <section class="related-products-section">
            <h2>Related Products</h2>
            <div class="scroll-area">
                <button class="arrow-btn left" onclick="scrollLeftCarousel()">&#10094;</button>

                <div class="products-carousel" id="relatedScroll">
                    <div class="product-cards">
                        <img src="images/image4.png" alt="V-Neck T-Shirts" />
                        <p>V-Neck T-Shirts<br /><small>Explore Now!</small></p>
                    </div>
                    <div class="product-cards">
                        <img src="images/image1.png" alt="Full Sleeve T-shirts" />
                        <p>Full Sleeve T-shirts<br /><small>Explore Now!</small></p>
                    </div>
                    <div class="product-cards">
                        <img src="images/image3.png" alt="T-Shirts" />
                        <p>T-Shirts<br /><small>Explore Now!</small></p>
                    </div>
                    <div class="product-cards">
                        <img src="images/image5.jpg" alt="T-Shirts" />
                        <p>Round Neck T-Shirts<br /><small>Explore Now!</small></p>
                    </div>
                   
                </div>

                <button class="arrow-btn right" onclick="scrollRightCarousel()">&#10095;</button>
            </div>
        </section> {% endcomment %}



        <!-- Footer  -->
        <div class="footer-5-column">
            <div class="footer-container">
                <!-- Footer Navigation-->
                <div class="footer-navbar-container">
                    <div class="footer-company-details">
                        <!-- <div class="footer-details-inner"> -->
                        <div class="footer-logo">
                            <h3 class="logo">FitAttire</h3>
                        </div>
                        <div class="footer-content">
                            <p>
                                Complete your style with awesome clothes from us.
                            </p>
                        </div>
                        <div class="footer-icons">
                            <ul>
                                <li>
                                    <a href="#">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                            <path
                                                d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z" />
                                        </svg>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                            <path
                                                d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" />
                                        </svg>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                            <path
                                                d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z" />
                                        </svg>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                            <path
                                                d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z" />
                                        </svg>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        
                    </div>
                    <div class="footer-navbar">
                        <div class="footer-navbar-col">
                            <h5>Solutions</h5>
                            <ul>
                                <li><a href="#"> Marketing </a></li>
                                <li><a href="#"> Analyst </a></li>
                                <li><a href="#"> Insight </a></li>
                                <li><a href="#"> Commerce </a></li>
                            </ul>
                        </div>
                        <div class="footer-navbar-col">
                            <h5>Support</h5>
                            <ul>
                                <li><a href="#"> Insight </a></li>
                                <li><a href="#"> Analyst </a></li>
                                <li><a href="#"> Marketing </a></li>
                                <li><a href="#"> Commerce </a></li>
                            </ul>
                        </div>
                        <div class="footer-navbar-col">
                            <h5>Company</h5>
                            <ul>
                                <li><a href="#"> Analyst </a></li>
                                <li><a href="#"> Commerce </a></li>
                                <li><a href="#"> Marketing </a></li>
                                <li><a href="#"> Insight </a></li>
                            </ul>
                        </div>
                        <div class="footer-navbar-col">
                            <h5>Legal</h5>
                            <ul>
                                <li><a href="#"> Commerce </a></li>
                                <li><a href="#"> Analyst </a></li>
                                <li><a href="#"> Insight </a></li>
                                <li><a href="#"> Marketing </a></li>
                            </ul>
                        </div>
                    </div>
                </div>
             
                <div class="footer-copyright">
                    <p>¬© 2025 FASHION - All Rights Reserved</p>
                </div>
            </div>
        </div>
    </main>

    <script src="{% static 'js/product-display.js' %}"></script>

{% endblock %}