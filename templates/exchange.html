{% extends 'base.html' %}
{% load static %}

{% block contain %}

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/style2.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive2.css' %}">
    <link rel="stylesheet" href="{% static 'css/utility2.css' %}">

    <main id="main" class="main">
        <header class="page-header mt-3">
            <h1>Exchange</h1>
        </header>

        <section class="action-buttons-section">
            <div class="card">
                <div class="card-body">
                    <div class="action-buttons">
                        <div class="action-button-group">
                            <div class="action-icon return-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="48" height="48"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M9 10h6c2.76 0 5 2.24 5 5s-2.24 5-5 5h-6"></path>
                                    <path d="M9 15l-5-5 5-5"></path>
                                </svg>
                            </div>
                            <h3>Return Product</h3>
                            <p class="action-description">Scan QR code to process product returns from customers</p>
                            <div class="qrcodes">
        
                                <button id="return-scan-btn" class="btn"><i class="fas fa-qrcode"></i>Scan QR Code</button>
                                <button id="return-cancel-btn" class="btn" style="display:none;">Stop Scanning</button>
        
                                <div id="return-reader" style="display:none;"></div>

                                <script src="https://unpkg.com/html5-qrcode"></script>
                            </div>
                        </div>
                        <div class="action-button-group">
                            <div class="action-icon delete-icon-container">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="48" height="48"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M3 6h18"></path>
                                    <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                                    <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                                    <line x1="10" y1="11" x2="10" y2="17"></line>
                                    <line x1="14" y1="11" x2="14" y2="17"></line>
                                </svg>
                            </div>
                            <h3>Delete Product</h3>
                            <p class="action-description">Scan QR code to remove products from inventory</p>
                            <div class="qrcodes">
        
                                <button id="delete-scan-btn" class="btn"><i class="fas fa-qrcode"></i>Scan QR Code</button>
                                <button id="delete-cancel-btn" class="btn" style="display:none;">Stop Scanning</button>
        
                                <div id="delete-reader" style="display:none;"></div>
        
                                <script src="https://unpkg.com/html5-qrcode"></script>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="product-table-section">
            <div class="card">
                <div class="card-header">
                    <h2>Products</h2>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table style="width: 100%;">
                            <thead>
                            <tr>
                                <th>Result Image</th>
                                <th>Product Color</th>
                                <th style="width: 80px;">Product Name</th>
                                <th style="width: 80px;">Returned/Deleted</th>
                                <th>Stock</th>
                                <th>Price</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody id="tableBody">
                            <!-- Dynamic rows will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                    <button type="button" id="submit-btn" class="btn mt-4 m-1">Submit</button>
                </div>
            </div>
        </section>

        <section class="search-section">
            <div class="card">
                <div class="card-header">
                    <h2>Find Products</h2>
                </div>
                <!-- <p style="padding-left: 20px;">Search product</p> -->
                <div class="card-body">
                    <div class="search-form">
                        <div class="input-group">
                            <input type="text" id="product-search"
                                placeholder="Enter product name, ID, or description">
                            <button class="search-icon">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="exchange-history-section">
            <div class="card">
                <div class="card-header">
                    <h2>Exchange History</h2>
                    <div class="tab-navigation">
                        <button class="tab-btn active" data-tab="all">All</button>
                        <button class="tab-btn" data-tab="returned">Returned</button>
                        <button class="tab-btn" data-tab="deleted">Deleted</button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table id="exchangeTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Product Name</th>
                                    <th>Returned/Deleted</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody id="exchangeTableBody">
                                <!-- Table rows will be populated dynamically -->
                                <script>
                                    const exchangeFirstData = {{ exchange_data|safe }};
                                </script>
                            </tbody>
                        </table>
                    </div>
                    <div class="pagination">
                        <button id="prev-page" class="btn secondary-btn"><i class="fas fa-chevron-left"></i>
                            Previous</button>
                        <span id="page-info"> 1-5 of 10</span>
                        <button id="next-page" class="btn secondary-btn">Next <i
                                class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="{% static 'js/exchange.js' %}" defer></script>

{% endblock %}